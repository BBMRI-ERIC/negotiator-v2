<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:composite="http://xmlns.jcp.org/jsf/composite">

<composite:interface>
    <composite:attribute name="cc.attrs.queryBean" required="true"/>
</composite:interface>

<composite:implementation>

    <h:panelGroup layout="block" style="margin-top: 0px;" >
        <h:panelGroup class="input-group" layout="block">
            <input placeholder="#{label['attachmentview.placeholder']}" type="text"
                   class="form-control" readonly="readonly"
                   onclick="$('#uploadform\\:file').click();" />

            <label class="input-group-btn"> <h:panelGroup
                    class="btn btn-default">
                <h:outputText value="#{label['querydetail.action.browse']}" />
                <h:inputFile id="file" value="#{cc.attrs.queryBean.file}"
                             validator="#{cc.attrs.queryBean.validateFile}"
                             onchange="$('#uploadform\\:uploadBtn').removeClass('disabled');"
                             style="display: none;" />
            </h:panelGroup> <h:commandButton id="uploadBtn" value="Upload"
                                             action="#{cc.attrs.queryBean.uploadAttachment}"
                                             styleClass="btn btn-primary disabled" />
            </label>
        </h:panelGroup>
        <h:panelGroup layout="block">
            <ul>
                <ui:repeat value="#{cc.attrs.queryBean.msgs}" var="msgs">
                    <li>
                        <h:outputText id="uploadMessages" value="#{msgs.detail}" style="#{msgs.summary == 'Upload Failed' ? 'color: red' : 'color: green'}" />
                    </li>
                </ui:repeat>
            </ul>
        </h:panelGroup>
        <h:outputScript>
            $(function() {
                initializeFileUpload();
            });
        </h:outputScript>
    </h:panelGroup>

</composite:implementation>

</html>

